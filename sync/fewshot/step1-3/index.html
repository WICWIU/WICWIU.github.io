
<!doctype html>
<html lang="kr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <meta name="author" content="HGU DL Lab">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.ico">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-6.1.0">
    
    
      
        <title>Coding: PNG, CImg - WICWIU</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.bc7e593a.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab28b872.min.css">
        
          
          
          <meta name="theme-color" content="#4051b5">
        
      
    
    
    
      
        
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css">
    
      <link rel="stylesheet" href="../../../stylesheets/gradient-dark.css">
    
      <link rel="stylesheet" href="../../../stylesheets/config.css">
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="">
      
  
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#digital-image" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="../../.." title="WICWIU" class="md-header-nav__button md-logo" aria-label="WICWIU">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            WICWIU
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Coding&#58; PNG, CImg
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="검색" placeholder="검색" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/WICWIU/WICWIU/" title="저장소로 이동" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    WICWIU
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="WICWIU" class="md-nav__button md-logo" aria-label="WICWIU">
      
  <img src="../../../assets/images/favicon.png" alt="logo">

    </a>
    WICWIU
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/WICWIU/WICWIU/" title="저장소로 이동" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    WICWIU
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../about/" class="md-nav__link">
      About
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../api/" class="md-nav__link">
      API
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      논문 정리
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="논문 정리" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon"></span>
        논문 정리
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../paper/resnet/" class="md-nav__link">
      ResNet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../paper/facenet/" class="md-nav__link">
      FaceNet
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../paper/quadruplet/" class="md-nav__link">
      Quadruplet
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      WICWIU 개발 가이드
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="WICWIU 개발 가이드" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        <span class="md-nav__icon md-icon"></span>
        WICWIU 개발 가이드
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-1" type="checkbox" id="nav-5-1">
    
    <label class="md-nav__link" for="nav-5-1">
      WICWIU
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="WICWIU" data-md-level="2">
      <label class="md-nav__title" for="nav-5-1">
        <span class="md-nav__icon md-icon"></span>
        WICWIU
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/wicwiu/about/" class="md-nav__link">
      1. About WICWIU
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/wicwiu/nn/" class="md-nav__link">
      2. WICWIU 신경망 구성
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/wicwiu/learn/" class="md-nav__link">
      3. WICWIU 로 학습하기
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/wicwiu/code/" class="md-nav__link">
      4. WICWIU 코드 같이보기
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-2" type="checkbox" id="nav-5-2">
    
    <label class="md-nav__link" for="nav-5-2">
      Git
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Git" data-md-level="2">
      <label class="md-nav__title" for="nav-5-2">
        <span class="md-nav__icon md-icon"></span>
        Git
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/Git/git/" class="md-nav__link">
      Collaborate with Git
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/Git/message/" class="md-nav__link">
      Commit/PR protocol
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/Git/update/" class="md-nav__link">
      Update forked repo
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-3" type="checkbox" id="nav-5-3">
    
    <label class="md-nav__link" for="nav-5-3">
      VSCode
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="VSCode" data-md-level="2">
      <label class="md-nav__title" for="nav-5-3">
        <span class="md-nav__icon md-icon"></span>
        VSCode
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/VSCode/remote/" class="md-nav__link">
      딥러닝 서버 VSCode 연동
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/VSCode/git/" class="md-nav__link">
      VSCode Git 연동
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-4" type="checkbox" id="nav-5-4">
    
    <label class="md-nav__link" for="nav-5-4">
      GPU Acceleration
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="GPU Acceleration" data-md-level="2">
      <label class="md-nav__title" for="nav-5-4">
        <span class="md-nav__icon md-icon"></span>
        GPU Acceleration
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/GPU/cuda/" class="md-nav__link">
      cuda
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-5" type="checkbox" id="nav-5-5">
    
    <label class="md-nav__link" for="nav-5-5">
      Makefile
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Makefile" data-md-level="2">
      <label class="md-nav__title" for="nav-5-5">
        <span class="md-nav__icon md-icon"></span>
        Makefile
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/makefile/makefile/" class="md-nav__link">
      Makefile 기본
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/makefile/makefile2/" class="md-nav__link">
      Makefile 고급
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-5-6" type="checkbox" id="nav-5-6">
    
    <label class="md-nav__link" for="nav-5-6">
      CLI
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="CLI" data-md-level="2">
      <label class="md-nav__title" for="nav-5-6">
        <span class="md-nav__icon md-icon"></span>
        CLI
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/cli/cli/" class="md-nav__link">
      CLI
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/cli/zsh/" class="md-nav__link">
      zsh
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../dev/cli/tmux/" class="md-nav__link">
      tmux
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6" checked>
    
    <label class="md-nav__link" for="nav-6">
      WICWIU 지식동기화
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="WICWIU 지식동기화" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        <span class="md-nav__icon md-icon"></span>
        WICWIU 지식동기화
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-1" type="checkbox" id="nav-6-1" checked>
    
    <label class="md-nav__link" for="nav-6-1">
      fewshot diary
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="fewshot diary" data-md-level="2">
      <label class="md-nav__title" for="nav-6-1">
        <span class="md-nav__icon md-icon"></span>
        fewshot diary
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-1-1" type="checkbox" id="nav-6-1-1" checked>
    
    <label class="md-nav__link" for="nav-6-1-1">
      Step 1. Data &rarr; Tensor
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Step 1. Data &rarr; Tensor" data-md-level="3">
      <label class="md-nav__title" for="nav-6-1-1">
        <span class="md-nav__icon md-icon"></span>
        Step 1. Data &rarr; Tensor
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../step1-1/" class="md-nav__link">
      Analysis&#58; LFW 1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../step1-2/" class="md-nav__link">
      Analysis&#58; LFW 2
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Coding&#58; PNG, CImg
        <span class="md-nav__icon md-icon"></span>
      </label>
    
    <a href="./" class="md-nav__link md-nav__link--active">
      Coding&#58; PNG, CImg
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="목차">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      목차
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#digital-image" class="md-nav__link">
    Digital Image
  </a>
  
    <nav class="md-nav" aria-label="Digital Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel" class="md-nav__link">
    채널(Channel)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-depth" class="md-nav__link">
    픽셀 정밀도(Bit Depth)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#png-file-format" class="md-nav__link">
    PNG file format
  </a>
  
    <nav class="md-nav" aria-label="PNG file format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cimg" class="md-nav__link">
    CImg
  </a>
  
    <nav class="md-nav" aria-label="CImg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    픽셀 저장 방식
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-loop" class="md-nav__link">
    Image Loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cimg_1" class="md-nav__link">
    CImg 테스트
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coding-data-tensor" class="md-nav__link">
    Coding: Data &rarr; Tensor
  </a>
  
    <nav class="md-nav" aria-label="Coding: Data &rarr; Tensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#convert-first-png-tensor" class="md-nav__link">
    Convert first .png &rarr; Tensor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../step2/" class="md-nav__link">
      Step 2. 순전파
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../step3/" class="md-nav__link">
      Step 3. 역전파
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../step4/" class="md-nav__link">
      Step 4. 최적화
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-6-2" type="checkbox" id="nav-6-2">
    
    <label class="md-nav__link" for="nav-6-2">
      Coding Convention
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="Coding Convention" data-md-level="2">
      <label class="md-nav__title" for="nav-6-2">
        <span class="md-nav__icon md-icon"></span>
        Coding Convention
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../convention/step1-1/" class="md-nav__link">
      About Coding Convention
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../convention/googlestyleguide/" class="md-nav__link">
      (ABANDONED)Google C++ Style Guide
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      이곳에 문서 작성하기
      <span class="md-nav__icon md-icon"></span>
    </label>
    <nav class="md-nav" aria-label="이곳에 문서 작성하기" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        <span class="md-nav__icon md-icon"></span>
        이곳에 문서 작성하기
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/markdown/" class="md-nav__link">
      Step 1. Markdown 파일
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/code/" class="md-nav__link">
      Step 2. 소스코드 설명하기
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/format/" class="md-nav__link">
      Step 3. 고오급 포매팅
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/admonitions/" class="md-nav__link">
      Step 4. Admonitions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/tab/" class="md-nav__link">
      Step 5. 컨텐츠 탭
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/button/" class="md-nav__link">
      Step 6. 버튼 넣기
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/math/" class="md-nav__link">
      Step 7. 수식 보여주기
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../../write/api/" class="md-nav__link">
      Step 8. API 작성
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="목차">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      목차
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#digital-image" class="md-nav__link">
    Digital Image
  </a>
  
    <nav class="md-nav" aria-label="Digital Image">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#channel" class="md-nav__link">
    채널(Channel)
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bit-depth" class="md-nav__link">
    픽셀 정밀도(Bit Depth)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#png-file-format" class="md-nav__link">
    PNG file format
  </a>
  
    <nav class="md-nav" aria-label="PNG file format">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#structure" class="md-nav__link">
    Structure
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cimg" class="md-nav__link">
    CImg
  </a>
  
    <nav class="md-nav" aria-label="CImg">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getting-started" class="md-nav__link">
    Getting Started
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    픽셀 저장 방식
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-loop" class="md-nav__link">
    Image Loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cimg_1" class="md-nav__link">
    CImg 테스트
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coding-data-tensor" class="md-nav__link">
    Coding: Data &rarr; Tensor
  </a>
  
    <nav class="md-nav" aria-label="Coding: Data &rarr; Tensor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#convert-first-png-tensor" class="md-nav__link">
    Convert first .png &rarr; Tensor
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/WICWIU/WICWIU/edit/master/docs/sync/fewshot/step1-3.md" title="이 페이지를 편집" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Coding&#58; PNG, CImg</h1>
                
                <p>우리는 분석을 통하여 데이터셋을 <code>Tensor</code>로 변환하는 방법을 이해했다.</p>
<p><strong>데이터셋을 <code>Tensor</code> 로 변환하는 방법이란 (1) 데이터셋을 적절한 방식으로 읽고 (2) 메모리에 저장한 다음 (3) <code>Tensor</code> 객체를 데이터셋 형상에 맞춰서 적절히 만들고 (4) 그냥 <code>Tensor[Index5D(i1, i2, i3, i4, i5)]</code> 라는 식으로 복사하는 것이다.</strong></p>
<p>그러므로 <strong>CasiaWebFace</strong> 의 <code>.png</code> 데이터셋을 <code>Tensor</code> 로 변환하는 본격적인 코딩을 시작할 수 있다. 하지만 그에 앞서 디지털 이미지가 컴퓨터에 저장되는 방식에 대한 이해, 그리고 <code>.png</code> 파일 포맷에 대한 가벼운 이해라도 필요하다.</p>
<h2 id="digital-image">Digital Image<a class="headerlink" href="#digital-image" title="Permanent link">&para;</a></h2>
<p>디지털 이미지는 <a href="https://en.wikipedia.org/wiki/Digital_image"><span class="arithmatex">\(xy\)</span> 축 좌표평면의 좌표 <span class="arithmatex">\(x, y\)</span> 를 이변수 벡터함수에 입력하고 얻은 출력으로 구성된 것</a>이다. 그 출력을 픽셀이라고 한다. </p>
<figure>
  <img src="https://t1.daumcdn.net/cfile/tistory/2724594D587F706214" width="50%" />
  <figcaption><i>픽셀로 구성되는 이미지 (https://twlab.tistory.com/23)</i></figcaption>
</figure>

<p>수학에서의 공간좌표는 다음과 같다.</p>
<figure>
  <img src="https://user-images.githubusercontent.com/16812446/89725063-24e86f80-da46-11ea-9e9c-d0d5ab4b6c25.png" width="70%" />
  <figcaption><i>수학에서의 3차원 공간좌표</i></figcaption>
</figure>

<p>하지만 이미지에서의 좌표는 수학에서의 좌표와 달리 왼쪽 상단부에서 좌표 <span class="arithmatex">\((0, 0)\)</span> 이 시작하고 <span class="arithmatex">\(y\)</span> 축이 아래쪽 방향으로 증가한다. 이 <span class="arithmatex">\(xy\)</span> 축에 따른 위치에 있는 값이 이미지의 픽셀값이 된다. 그리고 <span class="arithmatex">\(z\)</span> 축은 픽셀 정밀도를 나타낸다. <span class="arithmatex">\(z\)</span> 축이 깊을수록 픽셀 정밀도(<code>depth</code>)가 높아져서 색채가 더 높은 이미지가 나타난다. 픽셀 정밀도에 대해서는 아래에서 자세히 다룬다.</p>
<figure>
  <img src="https://user-images.githubusercontent.com/16812446/89725085-71cc4600-da46-11ea-8664-129f8777b06a.png" width="70%" />
  <figcaption><i>이미지에서의 픽셀값을 나타내기 위한 3차원 공간좌표</i></figcaption>
</figure>

<h3 id="channel">채널(Channel)<a class="headerlink" href="#channel" title="Permanent link">&para;</a></h3>
<p>위에서 살펴본 이미지의 공간좌표를 통하여 이미지가 픽셀 값을 정한다는 것을 알아보았다. 그런데 이렇게 <span class="arithmatex">\(3\)</span> 차원 공간좌표 하나로 이미지를 나타내면 이미지가 한 가지 색의 강도만 나타낼 수 있다. </p>
<p>따라서 보통은 픽셀 하나에 여러개의 색을 갖게 하고 그 색의 조합으로 최종적으로 픽셀의 색을 결정한다. 대표적으로 빨강, 초록, 파랑의 색 조합으로 픽셀의 색을 결정하는 방식을 트루컬러 <strong>RGB</strong> 방식이라고 한다. </p>
<p><ins>이러한 하나의 이미지 공간좌표를 채널(Channel)</ins> 이라고 한다. 하나의 채널은 이미지의 픽셀의 색상 정보를 가지고 있다. 채널이 <span class="arithmatex">\(1\)</span> 개 라면 보통 빛의 강도만을 나타내어 그레이 스케일 이미지를 표현하게 된다.</p>
<p><strong>RGB</strong> 의 경우 각 픽셀 당 빨강, 초록, 파랑의 정도를 나타내기 위하여 위와 같은 공간좌표가 <span class="arithmatex">\(3\)</span> 개 있다. 그러므로 이미지가 <span class="arithmatex">\(4\)</span> 차원 형상을 갖는다. 즉, <strong>RGB</strong> 는 채널 <span class="arithmatex">\(3\)</span> 개(공간좌표 <span class="arithmatex">\(3\)</span>개)를 사용하는 것이다.</p>
<p>요즘에는 투명도를 채널을 하나 더 추가하여 <span class="arithmatex">\(4\)</span> 개의 채널을 갖는 <strong>RGBA</strong> 이미지를 쓰기도 한다. 이 이미지는 픽셀의 색을 나타내는 공간좌표 <span class="arithmatex">\(4\)</span> 개를 갖는다.</p>
<h3 id="bit-depth">픽셀 정밀도(Bit Depth)<a class="headerlink" href="#bit-depth" title="Permanent link">&para;</a></h3>
<p>이미지가 픽셀을 정밀하게 나타내는 정도를 정밀도(<strong>depth</strong>)라고 한다. 위에서 살펴본 <strong>이미지의 공간좌표에서 <span class="arithmatex">\(z\)</span>축이 깊은 정도</strong> 를 나타내는 것이 픽셀 정밀도(<strong>depth</strong>) 인 것이다. 픽셀 정밀도를 나타내는 <ins>단위는 비트</ins> 이다.</p>
<h4>이진 이미지 (<code>depth=1</code>)</h4>
<p>초기의 이미지는 흑黑 을 뜻하는 <span class="arithmatex">\(0\)</span> 과 백白 을 뜻하는 <span class="arithmatex">\(1\)</span> 만으로 픽셀을 구성했다. 이것을 이진 이미지(binary image)라고 한다. 이진 이미지의 경우 픽셀을 표현하기 위하여 <code>1</code> 비트만 있으면 되기 때문에 <code>depth</code> 가 <code>1</code> 이다. 즉, 이진 이미지의 <span class="arithmatex">\(z\)</span> 축의 깊이는 <span class="arithmatex">\(1\)</span> 이다.</p>
<p>이진 이미지는 픽셀의 색깔을 나타내기 위하여 하나의 공간좌표만을 가지기 때문에 채널이 <code>1</code> 이다.</p>
<figure>
  <img src="https://kr.mathworks.com/help/images/intro4.gif" width="70%" />
  <figcaption><i>이진 이미지 (https://kr.mathworks.com/help/images/image-types-in-the-toolbox.html)</i></figcaption>
</figure>

<h4>그레이 스케일 (<code>depth=8</code>)</h4>
<p>그레이 스케일은 빛의 강도만을 픽셀에 나타내는 이미지이다. 그레이 스케일의 픽셀은 <code>0</code> 부터 <code>255</code> 의 값을 가진다. <code>8</code> 비트가 있으면 <span class="arithmatex">\(2 ^{8} = 256\)</span> 가지 색을 표현할 수 있다. 그러므로 그레이 스케일은 픽셀 하나당 <code>1</code> 바이트(<code>8</code> 비트) 의 정밀도(<strong>depth</strong>) 를 갖는다. 즉, 그레이 스케일의 <span class="arithmatex">\(z\)</span> 축의 깊이는 <span class="arithmatex">\(8\)</span> 이다.</p>
<p>그레이 스케일도 픽셀의 색을 나타내기 위하여 하나의 공간좌표만을 가지기 때문에 채널이 <code>1</code> 이다.</p>
<figure>
  <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Grayscale_8bits_palette_sample_image.png" width="30%" />
  <figcaption><i>그레이 스케일 이미지 (https://en.wikipedia.org/wiki/Grayscale)</i></figcaption>
</figure>

<h4>트루 컬러 (<code>depth=24</code>)</h4>
<p>트루 컬러 이미지는 픽셀이 <code>3</code> 개의 채널을 갖고, 각 채널이 <code>8</code> 비트의 픽셀 정밀도(<code>depth</code>)를 갖는다. 즉, 픽셀의 색을 나타내기 위하여 <span class="arithmatex">\(3\)</span> 개의 공간좌표를 가지는 것이다. 트루 컬러는 최종적으로 <span class="arithmatex">\(3\)</span> 개의 공간좌표의 좌표값(픽셀값)을 조합하여 색을 나타낸다. 트루 컬러 이미지는 채널이 <code>3</code> 개 이므로 한 픽셀 당 <code>24</code> 비트로 색을 표현한다.</p>
<p><strong>RGB</strong> 는 트루 컬러 이미지의 대표적인 예이다. <strong>RGB</strong> 는 빨강, 초록, 파랑의 강도를 각각 세 가지 채널(세 가지 공간좌표)로 나타낸다. 첫번째 채널이 빨간색의 정도를 <code>0~255</code> 로 나타내고, 두번째 채널이 초록색의 정도를 <code>0~255</code> 로 나타내고, 세번째 채널이 파란색의 정도를 <code>0~255</code> 로 나타낸다. 그리고 이 세 가지 색깔의 색조합을 통해 최종적으로 한 픽셀의 색깔을 만들어낸다.</p>
<p>다음 그림은 <code>0~255</code> 의 정수 채널 값을 <code>0~1</code> 의 실수로 스케일링 한 것이다.</p>
<figure>
  <img src="https://kr.mathworks.com/help/images/imagetypergb.png" width="70%" />
  <figcaption><i>트루 컬러 이미지 (https://kr.mathworks.com/help/images/image-types-in-the-toolbox.html)</i></figcaption>
</figure>

<dl>
<dt><em>References</em>: </dt>
<dd>
<p><a href="https://en.wikipedia.org/wiki/Digital_image">https://en.wikipedia.org/wiki/Digital_image</a></p>
</dd>
<dd>
<p><a href="https://twlab.tistory.com/23">https://twlab.tistory.com/23</a></p>
</dd>
<dd>
<p><a href="https://kr.mathworks.com/help/images/image-types-in-the-toolbox.html">https://kr.mathworks.com/help/images/image-types-in-the-toolbox.html</a></p>
</dd>
</dl>
<h2 id="png-file-format">PNG file format<a class="headerlink" href="#png-file-format" title="Permanent link">&para;</a></h2>
<p><code>.png</code> 파일의 포맷에 대한 정보는 <a href="https://github.com/corkami/formats/blob/master/image/png.md">이곳</a>을 통하여 얻을 수 있었다.</p>
<h3 id="structure">Structure<a class="headerlink" href="#structure" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://raw.githubusercontent.com/corkami/formats/master/image/PNGBasicStruct.svg" /></p>
<figcaption><i>PNG file Structure (https://github.com/corkami/formats/blob/master/image/png.md)</i></figcaption>

<p><strong>PNG</strong> 파일은 위와 같이 <strong>Signature</strong> 와 여러개의 <strong>chunk</strong> 들로 구성된다.</p>
<ol>
<li>
<p><strong>Signature</strong>: <strong>PNG</strong> 파일임을 구별할 수 있게 해주는 매직넘버로써 다음과 같은 <code>8</code> 바이트 데이터로 구성된다.</p>
<p><code>\x89PNG\x0d\x0a\x1a\x0a</code> </p>
</li>
<li>
<p><strong>chunk</strong>: [<strong>length-type-data-checksum</strong>] 와 같이 <code>4</code> 가지 데이터로 구성되는 데이터구조이다. </p>
<ol>
<li>
<p><code>length</code>: <code>&gt;4u</code> </p>
<p><code>4</code> 바이트 빅엔디안 <code>unsigned</code> 로 이루어진 데이터 길이 지정자이다. 이 길이는 <code>type-data-checksum</code> 의 길이가 아니라 오직 <code>data</code> 의 길이를 뜻한다. </p>
</li>
<li>
<p><code>type</code>: <code>4c</code> </p>
<p><code>4</code> 바이트 <code>char</code> 로 이루어진 타입 지정자이다. 타입은 <code>IHDR</code>, <code>IDAT</code>, <code>IEND</code> 등이 있다. <code>IHDR</code> 은 헤더 데이터를 뜻하고, <code>IDAT</code> 은 실제 이미지 데이터를 뜻하고, <code>IEND</code> 는 파일의 끝을 나타내는 데이터를 뜻한다.</p>
</li>
<li>
<p><code>data</code>: <code>[length]b</code></p>
<p><code>length</code> 바이트만큼의 실제 이미지 데이터이다.</p>
</li>
<li>
<p><code>checksum(type+data)</code>: <code>4u</code></p>
<p><code>4</code> 바이트 <code>unsigned</code> 로 이루어진 체크섬이다. 데이터가 훼손되지 않았는지 검증할 수 있게 해준다.</p>
</li>
</ol>
</li>
<li>
<p><strong>Terminator</strong>: 마지막으로 <strong>PNG</strong> 파일은 파일의 끝을 알리는 다음의 바이트 배열을 갖는다. </p>
<p><code>00 00 00 00 .I .E .N .D AE 42 60 82</code></p>
</li>
</ol>
<h3 id="example">Example<a class="headerlink" href="#example" title="Permanent link">&para;</a></h3>
<p><img alt="" src="https://raw.githubusercontent.com/corkami/formats/master/image/PNGRGB_dissected.png" /></p>
<figcaption><i>a dissected RGN png (https://github.com/corkami/formats/blob/master/image/png.md)</i></figcaption>

<p><strong>PNG</strong> 파일은 위와 같이 Signature 로 시작하여 Header, Data, Terminator 로 구성된다. 이것은 빨강, 초록, 파랑 픽셀만을 갖는 단순힌 <strong>PNG</strong> 파일을 분석한 것이다.</p>
<dl>
<dt><em>References</em>: </dt>
<dd>
<p><a href="https://github.com/corkami/formats/blob/master/image/png.md">https://github.com/corkami/formats/blob/master/image/png.md</a></p>
</dd>
</dl>
<hr />
<h2 id="cimg">CImg<a class="headerlink" href="#cimg" title="Permanent link">&para;</a></h2>
<p>이제 실제로 <strong>PNG</strong> 파일을 읽어서 메모리에 저장한 후 <code>Tensor</code> 로 변환해볼텐데 바이너리 파일을 읽고 저장하는 코드를 짜려면 <a href="http://www.libpng.org/pub/png/spec/1.2/png-1.2-pdg.html"><strong>PNG</strong> 파일의 전체 스펙을 기술한 표준</a> 모두 이해한 다음 바이너리 레벨의 처리를 해주어야 하므로 상당히 시간 소모가 많이 된다. 심지어 바이너리 레벨의 처리는 취약점이 발생하기 매우 쉬워서 <a href="https://github.com/WICWIU/WICWIU"><strong>WICWIU</strong></a> 에 취약점이 생길 수도 있다. </p>
<p>그러므로 <strong>PNG</strong> 파일을 읽을 수 있도록 이미 제작된 라이브러리를 사용하는 것이 낫다. <code>C++</code> 에서 <strong>PNG</strong> 파일을 읽을 수 있는 라이브러리는 많이 있지만 그 중에서 <a href="http://cimg.eu"><code>CImg</code></a> 를 사용하기로 했다. 그 이유는 다음과 같다.</p>
<ol>
<li>
<p><code>CImg</code> 는 <code>C++</code> 에서 이미지를 처리할 수 있도록 최적화된 라이브러리이다.</p>
</li>
<li>
<p><code>CImg</code> 는 이미지를 처리할 수 있는 클래스 템플릿을 제공하여 다양한 픽셀 타입(<code>bool</code>, <code>char</code>, <code>int</code>, <code>float</code> 등)으로 이미지를 저장할 수 있다.</p>
</li>
<li>
<p><code>CImg</code> 는 여러 이미지를 손쉽게 다룰 수 있는 기능을 제공한다.</p>
</li>
<li>
<p><code>CImg</code> 는 <strong>thread-safe</strong> 하다.</p>
</li>
<li>
<p><code>CImg</code> 는 가볍다. <code>CImg</code> 는 단지 하나의 헤더파일 <code>CImg.h</code> 로 구성된 라이브러리이다. <code>CImg</code> 에는 오직 <code>4</code> 가지 클래스만 정의되어 있다. <code>CImg</code> 는 다른 의존성 없이 순전히 <strong>STL</strong> 과 시스템 라이브러리만을 사용한다.</p>
</li>
<li>
<p><code>CImg</code> 는 무료이고 오픈소스이다.</p>
</li>
</ol>
<dl>
<dt><em>References</em>: </dt>
<dd>
<p><a href="http://cimg.eu">http://cimg.eu</a></p>
</dd>
</dl>
<h3 id="installation">Installation<a class="headerlink" href="#installation" title="Permanent link">&para;</a></h3>
<p><code>git clone --depth=1 https://github.com/dtschump/CImg.git</code> 로 <code>CImg.h</code> 를 가져온 후 그냥 </p>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;/path/to/CImg.h&quot;</span><span class="cp"></span>
</code></pre></div>
<p>헤더를 포함시키면 된다. 단지 헤더 파일을 포함시키는 것이 설치의 끝이다. 그리고 편의를 위하여 이름공간 <code>cimg_library</code> 를 사용하면 된다. 그러니까 </p>
<div class="highlight"><pre><span></span><code><span class="k">using</span> <span class="k">namespace</span> <span class="n">cimg_library</span><span class="p">;</span>
</code></pre></div>
<p>를 포함시키면 된다.</p>
<h3 id="getting-started">Getting Started<a class="headerlink" href="#getting-started" title="Permanent link">&para;</a></h3>
<p>다음의 예제 코드를 보자. <code>lena.png</code> 는 <a href="http://optipng.sourceforge.net/pngtech/img/lena.png">http://optipng.sourceforge.net/pngtech/img/lena.png</a> 에서 얻을 수 있다.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;CImg.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cimg_library</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">CImg</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">lena</span><span class="p">(</span><span class="s">&quot;lena.png&quot;</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;width: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;height: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;depth: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">.</span><span class="n">depth</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;channels: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">.</span><span class="n">spectrum</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;pixel type: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">.</span><span class="n">pixel_type</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">lena</span><span class="p">.</span><span class="n">print</span><span class="p">();</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>    
</code></pre></div>
</td></tr></table>
<ul>
<li>
<p><strong>8</strong>:</p>
<p>트루 컬러 <strong>RGB</strong> 이미지인 <code>lena.png</code> 를 읽고 <code>unsigned char</code> 로 읽는다. 이미지는 보통 이처럼 <code>unsigned char</code> 로 읽으면 된다. 왜냐하면 각 채널이 <code>0~255</code> 의 값을 갖기 때문이다. 만약 <code>char</code> 로 읽으면 채널의 값이 <code>-128~127</code> 의 값을 갖게 되버린다.</p>
</li>
<li>
<p><strong>9-15</strong>:</p>
<p><a href="http://cimg.eu/reference/structcimg__library_1_1CImg.html"><code>CImg</code> 의 <strong>API</strong></a> 를 참고하면 이미지의 메타데이터를 얻을 수 있는 함수들이 있다. 그러한 함수들로 위와 같은 코드가 구성되었다.</p>
</li>
</ul>
<p>이 프로그램을 <code>main.cpp</code> 파일에 저장한다면 리눅스 시스템에서는 다음과 같이 컴파일하고 실행하면 된다.</p>
<div class="highlight"><pre><span></span><code>$ g++ main.cpp -O2 -lm -lpthread -lX11
$ ./a.out
width: <span class="m">512</span>
height: <span class="m">512</span>
depth: <span class="m">1</span>
channels: <span class="m">3</span>
size: <span class="m">786432</span>
pixel type: unsigned char
CImg&lt;unsigned char&gt;: <span class="nv">this</span> <span class="o">=</span> 0x7ffdba95e5a0, <span class="nv">size</span> <span class="o">=</span> <span class="o">(</span><span class="m">512</span>,512,1,3<span class="o">)</span> <span class="o">[</span><span class="m">768</span> Kio<span class="o">]</span>, <span class="nv">data</span> <span class="o">=</span> <span class="o">(</span>unsigned char*<span class="o">)</span>0x7fe294140010..0x7fe29420000f <span class="o">(</span>non-shared<span class="o">)</span> <span class="o">=</span> <span class="o">[</span> <span class="m">226</span> <span class="m">226</span> <span class="m">223</span> <span class="m">223</span> <span class="m">226</span> <span class="m">226</span> <span class="m">228</span> <span class="m">227</span> ... <span class="m">88</span> <span class="m">85</span> <span class="m">80</span> <span class="m">89</span> <span class="m">77</span> <span class="m">79</span> <span class="m">81</span> <span class="m">81</span> <span class="o">]</span>, <span class="nv">min</span> <span class="o">=</span> <span class="m">3</span>, <span class="nv">max</span> <span class="o">=</span> <span class="m">255</span>, <span class="nv">mean</span> <span class="o">=</span> <span class="m">128</span>.228, <span class="nv">std</span> <span class="o">=</span> <span class="m">58</span>.9838, <span class="nv">coords_min</span> <span class="o">=</span> <span class="o">(</span><span class="m">264</span>,198,0,1<span class="o">)</span>, <span class="nv">coords_max</span> <span class="o">=</span> <span class="o">(</span><span class="m">445</span>,51,0,0<span class="o">)</span>.
</code></pre></div>
<p><code>width()</code> 함수가 <code>512</code> 를 반환했다. 이것은 이미지의 가로(<span class="arithmatex">\(x\)</span>축) 길이를 뜻한다. <code>height()</code> 함수가 <code>512</code> 를 반환했다. 이것은 이미지의 세로(<span class="arithmatex">\(y\)</span>축) 길이를 뜻한다.</p>
<p><code>depth()</code> 함수가 <code>1</code> 를 반환했다. 이것은 이미지의 픽셀 정밀도(<span class="arithmatex">\(z\)</span>축)을 뜻한다. 하지만 <code>1</code> 비트를 뜻하는 것이 아니라 <code>1</code> 바이트를 뜻하는 것이므로 각 채널이 <code>8</code> 비트의 픽셀 정밀도를 갖는다는 것을 의미한다. </p>
<p>그런데 트루 컬러 <strong>RGB</strong> 이미지의 픽셀 정밀도는 <code>24</code> 라고 했었다. 하지만 <code>spectrum()</code> 함수가 <code>3</code> 을 반환하였다. 그렇기 때문에 채널이 <code>3</code> 개 이므로 <span class="arithmatex">\(3 \times 8 = 24\)</span> 로써 픽셀 정밀도가 <code>24</code> 가 된다. </p>
<dl>
<dt><em>References</em>: </dt>
<dd>
<p><a href="http://cimg.eu/reference/group__cimg__tutorial.html">http://cimg.eu/reference/group__cimg__tutorial.html</a> </p>
</dd>
</dl>
<h3 id="_1">픽셀 저장 방식<a class="headerlink" href="#_1" title="Permanent link">&para;</a></h3>
<p><code>CImg</code> 는 생성될 때 이미지의 모든 픽셀값을 메모리에 한번에 저장한다. <code>CImg</code> 는 기본적으로 <code>4</code> 차원(<code>width</code>, <code>height</code>, <code>depth</code>, <code>dim</code>) 배열이다. 그리고 이 픽셀값들이 실제로 메모리에 저장될 때는 <code>width * height * depth * dim</code> 의 크기의 선형 배열(<code>1</code> 차원 배열)로 저장된다.</p>
<p>그러니까 <code>CImg&lt;T&gt;</code> 로 이미지 객체가 생성되면 <code>width * height * depth * dim * sizeof(T)</code> 바이트가 할당된다. 이렇게 픽셀들이 저장된 메모리의 주소값은 <code>CImg&lt;T&gt;::data()</code> 메소드가 반환한다. 이것을 <code>T*</code> 에 저장하면 된다. </p>
<h4>픽셀 저장 순서</h4>
<p>픽셀값은 <span class="arithmatex">\(x\)</span> 축, <span class="arithmatex">\(y\)</span> 축, <span class="arithmatex">\(z\)</span> 축, <span class="arithmatex">\(v\)</span> 축(각각 <code>width</code>, <code>height</code>, <code>depth</code>, <code>dim(channels)</code>) 순서대로 저장된다. 즉 이미지의 왼쪽 위 픽셀부터 오른쪽 아래 픽셀까지 순서대로 저장되어 있다. </p>
<p>픽셀값은 교차로 배치되어 있지 않다. 그렇기 때문에 <span class="arithmatex">\(n \times m \times 1 \times 3\)</span> 형상의 <strong>RGB</strong> 이미지는 메모리에 선형 순서로</p>
<div class="arithmatex">\[ R _{00} R _{01} \dots R _{0n} R _{10} R _{11} \dots R _{1n}  \dots R _{m0} R _{m1} \dots R _{mn} \]</div>
<div class="arithmatex">\[G _{00} G _{01} \dots G _{0n} G _{10} G _{11} \dots G _{1n}  \dots G _{m0} G _{m1} \dots G _{mn} \]</div>
<div class="arithmatex">\[B _{00} B _{01} \dots B _{0n} B _{10} B _{11} \dots B _{1n}  \dots B _{m0} B _{m1} \dots B _{mn} \]</div>
<p>로 저장되어 있고, </p>
<div class="arithmatex">\[ R _{00} G _{00} B _{00} R _{01} G _{01} B _{01} \dots \]</div>
<p>처럼 교차로 저장되어 있지 않다.</p>
<h4>픽셀 값 가져오기</h4>
<p><a href="http://cimg.eu/reference/structcimg__library_1_1CImg.html"><code>CImg</code> 의 <strong>API</strong></a> 를 참조하면 <a href="http://cimg.eu/reference/structcimg__library_1_1CImg.html#accb8526e4303186fb6246ac1301fdf66"><code>()</code> 연산자 오버로딩 메소드</a>를 볼 수 있다. 이 메소드는 다음과 같이 정의되어 있다.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">T</span><span class="o">&amp;</span> <span class="k">operator</span><span class="p">()</span>   <span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span>     <span class="n">x</span><span class="p">,</span>
                 <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span>     <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span>     <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
                 <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">int</span>     <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span> 
                <span class="p">)</span>   
</code></pre></div>
</td></tr></table>
<p>그리고 설명은 다음과 같다.</p>
<div class="admonition quote">
<p class="admonition-title">Quote</p>
<p>Access to a pixel value.</p>
<p>Return a reference to a located pixel value of the image instance, being possibly const, whether the image instance is const or not. This is the standard method to get/set pixel values in CImg<T> images.</p>
<dl>
<dt>Parameter</dt>
<dd>
<p><code>x</code>:    X-coordinate of the pixel value</p>
</dd>
<dd>
<p><code>y</code>:    Y-coordinate of the pixel value</p>
</dd>
<dd>
<p><code>z</code>:    Z-coordinate of the pixel value</p>
</dd>
<dd>
<p><code>c</code>:    C-coordinate of the pixel value</p>
</dd>
</dl>
</div>
<p>이것을 사용하면 매우 편리하게 좌표로 이미지가 저장되어 있는 곳의 메모리를 참조할 수 있다.</p>
<p>위에서 설명한 <span class="arithmatex">\(n \times m \times 1 \times 3\)</span> 형상의 <strong>RGB</strong> 이미지를 참조하는 예시를 들어보자.</p>
<p><span class="arithmatex">\(R _{00}\)</span> 값을 가져오려면 <code>img(0, 0, 0, 0)</code> 로 참조하면 된다.</p>
<p><span class="arithmatex">\(R _{01}\)</span> 값을 가져오려면 <code>img(1, 0, 0, 0)</code> 로 참조하면 된다.</p>
<p><span class="arithmatex">\(G _{00}\)</span> 값을 가져오려면 <code>img(0, 0, 0, 1)</code> 로 참조하면 된다.</p>
<p><span class="arithmatex">\(G _{01}\)</span> 값을 가져오려면 <code>img(1, 0, 0, 1)</code> 로 참조하면 된다.</p>
<p><span class="arithmatex">\(B _{00}\)</span> 값을 가져오려면 <code>img(0, 0, 0, 2)</code> 로 참조하면 된다.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p><span class="arithmatex">\(1 \times 5 \times 1 \times 1\)</span> 형상의 이미지 <span class="arithmatex">\(A\)</span> 를 <code>CImg</code> 로 저장한다면 메모리에 선형순서로</p>
<div class="arithmatex">\[ A _{00} A _{10} A _{20} A _{30} A _{40} \]</div>
<p>와 같이 저장된다. 이때 픽셀값 <span class="arithmatex">\(A _{00}\)</span> 은 <code>img(0, 0)</code>, <span class="arithmatex">\(A _{10}\)</span> 은 <code>img(0, 1)</code>, <span class="arithmatex">\(\dots\)</span>, <span class="arithmatex">\(A _{40}\)</span> 는 <code>img(0, 4)</code> 로 참조할 수 있다.</p>
<p><span class="arithmatex">\(5 \times 1 \times 1 \times 1\)</span> 형상의 이미지 <span class="arithmatex">\(A\)</span> 를 <code>CImg</code> 로 저장한다면 메모리에 선형순서로</p>
<div class="arithmatex">\[ A _{00} A _{01} A _{02} A _{03} A _{04} \]</div>
<p>와 같이 저장된다. 이때 픽셀값 <span class="arithmatex">\(A _{00}\)</span> 은 <code>img(0, 0)</code>, <span class="arithmatex">\(A _{01}\)</span> 은 <code>img(1, 0)</code>, <span class="arithmatex">\(\dots\)</span>, <span class="arithmatex">\(A _{04}\)</span> 는 <code>img(4, 0)</code> 로 참조할 수 있다.</p>
</div>
<p>또한 <code>CImg</code> 는 축이 <code>1</code> 일 경우 그 좌표값을 생략할 수 있도록 해준다. 다음 예시를 보면 <span class="arithmatex">\((10, 10)\)</span> 의 <span class="arithmatex">\(B\)</span> 의 값을 <code>valB = img(10,10,2)</code> 로 참조하는 것이 가능하다는 것을 알 수 있다.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="c1">// Construct a 100x100x1x3 (color) image with pixels set to &#39;0&#39;</span>
<span class="n">CImg</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">img</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
<span class="k">const</span> <span class="kt">float</span>
<span class="c1">// Read red value at coordinates (10,10)</span>
<span class="n">valR</span> <span class="o">=</span> <span class="n">img</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> 
<span class="c1">// Read green value at coordinates (10,10)</span>
<span class="n">valG</span> <span class="o">=</span> <span class="n">img</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span> 
<span class="c1">// Read blue value at coordinates (10,10) (Z-coordinate can be omitted)</span>
<span class="n">valB</span> <span class="o">=</span> <span class="n">img</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">),</span>   
<span class="c1">// Compute average pixel value</span>
<span class="n">avg</span> <span class="o">=</span> <span class="p">(</span><span class="n">valR</span> <span class="o">+</span> <span class="n">valG</span> <span class="o">+</span> <span class="n">valB</span><span class="p">)</span><span class="o">/</span><span class="mi">3</span><span class="p">;</span> 
<span class="c1">// Replace the color pixel (10,10) by the average grey value</span>
<span class="n">img</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span> <span class="o">=</span> <span class="n">img</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span> <span class="o">=</span> <span class="n">avg</span><span class="p">;</span> 
</code></pre></div>
</td></tr></table>
</div>
<dl>
<dt><em>References</em>: </dt>
<dd>
<p><a href="http://cimg.eu/reference/group__cimg__storage.html">http://cimg.eu/reference/group__cimg__storage.html</a></p>
</dd>
</dl>
<h3 id="image-loop">Image Loop<a class="headerlink" href="#image-loop" title="Permanent link">&para;</a></h3>
<p><code>CImg</code> 는 픽셀 버퍼 루프, 차원 루프 매크로를 제공한다. 가령 <code>cimg_forX(img,x)</code> 은 </p>
<div class="highlight"><pre><span></span><code><span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span><span class="o">&lt;</span><span class="n">img</span><span class="p">.</span><span class="n">width</span><span class="p">();</span> <span class="o">++</span><span class="n">x</span><span class="p">)</span>
</code></pre></div>
<p>와 똑같다. <code>CImg</code> 의 이 기능은 데이터셋을 <code>Tensor</code> 로 변환할 때 편하게 사용될 수 있을 것 같다.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">CImg</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">img</span><span class="p">(</span><span class="mi">256</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>       <span class="c1">// Define a 256x256 color image</span>
<span class="n">cimg_forXYC</span><span class="p">(</span><span class="n">img</span><span class="p">,</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="p">{</span> <span class="n">img</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">,</span><span class="n">c</span><span class="p">)</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">c</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">6</span><span class="p">;</span> <span class="p">}</span>
<span class="n">img</span><span class="p">.</span><span class="n">display</span><span class="p">(</span><span class="s">&quot;Color gradient&quot;</span><span class="p">);</span>
</code></pre></div>
</td></tr></table>
</div>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>이로써 데이터셋을 <code>Tensor</code> 로 변환하는 코드를 대충 다음과 같이 구상해볼 수 있을것 하다.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">CImg</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">lena</span><span class="p">(</span><span class="s">&quot;lena.png&quot;</span><span class="p">);</span>

<span class="n">Tensor</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">t</span><span class="p">;</span> 
<span class="n">cimg_forXYZC</span><span class="p">(</span><span class="n">lena</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">t</span><span class="p">[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">Shape</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">)]</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">img</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">z</span><span class="p">,</span> <span class="n">c</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<p>그런데 축이 <code>1</code> 일 경우 좌표를 생략해도 된다고 했으니까 다음과 같이 더욱 간략하게 짤 수도 있을 것 같다.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>1
2
3
4
5
6</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">CImg</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">lena</span><span class="p">(</span><span class="s">&quot;lena.png&quot;</span><span class="p">);</span>

<span class="n">Tensor</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">t</span><span class="p">;</span> 
<span class="n">cimg_forXYC</span><span class="p">(</span><span class="n">lena</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">t</span><span class="p">[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">Shape</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">)]</span> <span class="o">=</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span><span class="p">(</span><span class="n">img</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
</div>
<dl>
<dt><em>References</em>: </dt>
<dd>
<p><a href="http://cimg.eu/reference/group__cimg__loops.html">http://cimg.eu/reference/group__cimg__loops.html</a></p>
</dd>
</dl>
<h3 id="cimg_1">CImg 테스트<a class="headerlink" href="#cimg_1" title="Permanent link">&para;</a></h3>
<p><code>CImg</code> 가 충분히 괜찮은 라이브러리인 것 같으니 마지막으로 충분히 검증된 파이썬 패키지를 통하여 이미지를 읽는 것을 비교하면서 <code>CImg</code> 가 픽셀을 잘 저장하고 있는지 테스트해도록 하자.</p>
<p>먼저 <code>CImg</code> 로 다음과 같은 간단한 프로그램을 만들어본다.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;CImg.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cimg_library</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">c</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span> <span class="n">v</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">CImg</span><span class="o">&lt;</span><span class="kt">float</span><span class="o">&gt;</span> <span class="n">lena</span><span class="p">(</span><span class="s">&quot;lena.png&quot;</span><span class="p">);</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;R of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;R of (0, 1): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;R of (27, 199): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">199</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;G of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;G of (381, 501): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">501</span><span class="p">,</span> <span class="mi">381</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;B of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;B of (1, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;B of (144, 9): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">lena</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span> 
</code></pre></div>
</td></tr></table>
<ul>
<li>
<p><strong>9-16</strong>:</p>
<p><span class="arithmatex">\((0, 0), (0, 1), (27, 199)\)</span> 의 <strong>R</strong> 값과 <span class="arithmatex">\((0, 0), (381, 501)\)</span> 의 <strong>G</strong> 값과 <span class="arithmatex">\((0, 0), (1, 0), (144, 9)\)</span> 의 <strong>B</strong> 값을 출력해본다.</p>
</li>
</ul>
<p>출력 결과는 다음과 같다. </p>
<div class="highlight"><pre><span></span><code>$ g++ main.cpp -O2 -lm -lpthread -lX11
$ ./a.out
R of <span class="o">(</span><span class="m">0</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">226</span>
R of <span class="o">(</span><span class="m">0</span>, <span class="m">1</span><span class="o">)</span>: <span class="m">226</span>
R of <span class="o">(</span><span class="m">27</span>, <span class="m">199</span><span class="o">)</span>: <span class="m">211</span>
G of <span class="o">(</span><span class="m">0</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">137</span>
G of <span class="o">(</span><span class="m">381</span>, <span class="m">501</span><span class="o">)</span>: <span class="m">179</span>
B of <span class="o">(</span><span class="m">0</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">125</span>
B of <span class="o">(</span><span class="m">1</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">125</span>
B of <span class="o">(</span><span class="m">144</span>, <span class="m">9</span><span class="o">)</span>: <span class="m">72</span>
</code></pre></div>
<p>이제 <strong>Python</strong> 패키지 <code>imageio</code> 를 통하여 똑같은 이미지를 읽고 같은 좌표값을 출력해본다. 다음과 같이 간단한 <strong>Python</strong> 프로그램을 만들고 <code>test_cimg.py</code> 로 저장하자.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">imageio</span>
<span class="n">lena</span> <span class="o">=</span> <span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;lena.png&quot;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R of (0, 0):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R of (0, 1):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;R of (27, 199):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">27</span><span class="p">,</span> <span class="mi">199</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;G of (0, 0):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;G of (381, 501):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">381</span><span class="p">,</span> <span class="mi">501</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B of (0, 0):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B of (1, 0):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;B of (144, 9):&quot;</span><span class="p">,</span> <span class="n">lena</span><span class="p">[</span><span class="mi">144</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">2</span><span class="p">])</span>
</code></pre></div>
<p>출력 결과는 다음과 같다.</p>
<div class="highlight"><pre><span></span><code>$ python test_cimg.py
R of <span class="o">(</span><span class="m">0</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">226</span>
R of <span class="o">(</span><span class="m">0</span>, <span class="m">1</span><span class="o">)</span>: <span class="m">226</span>
R of <span class="o">(</span><span class="m">27</span>, <span class="m">199</span><span class="o">)</span>: <span class="m">211</span>
G of <span class="o">(</span><span class="m">0</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">137</span>
G of <span class="o">(</span><span class="m">381</span>, <span class="m">501</span><span class="o">)</span>: <span class="m">179</span>
B of <span class="o">(</span><span class="m">0</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">125</span>
B of <span class="o">(</span><span class="m">1</span>, <span class="m">0</span><span class="o">)</span>: <span class="m">125</span>
B of <span class="o">(</span><span class="m">144</span>, <span class="m">9</span><span class="o">)</span>: <span class="m">72</span>
</code></pre></div>
<p><code>CImg</code> 프로그램의 출력 결과와 완전히 똑같다는 것을 알 수 있다.</p>
<hr />
<h2 id="coding-data-tensor">Coding: Data &rarr; Tensor<a class="headerlink" href="#coding-data-tensor" title="Permanent link">&para;</a></h2>
<p>데이터셋을 <code>Tensor</code> 로 변환하는 방법은 <strong>(1) 데이터셋을 적절한 방식으로 읽고 (2) 메모리에 저장한 다음 (3) <code>Tensor</code> 객체를 데이터셋 형상에 맞춰서 적절히 만들고 (4) 그냥 <code>Tensor[Index5D(i1, i2, i3, i4, i5)]</code> 라는 식으로 복사하는 것이었다.</strong></p>
<p>그런데 이제 우리는 디지털 이미지가 어떤 형태로 컴퓨터에 저장되는지, 그리고 <code>.png</code> 파일 포맷은 어떻게 되어 있는지, 그리고 <code>CImg</code> 로 <code>.png</code> 파일을 읽고 어떻게 픽셀값들을 정확한 좌표로 참조할 수 있는지 알았다.</p>
<p>그러므로 <strong>CasiaWebFace</strong> 의 <code>.png</code> 데이터셋을 <code>Tensor</code> 로 변환하는 본격적인 코딩을 시작할 수 있다. </p>
<h3 id="convert-first-png-tensor">Convert first <code>.png</code> &rarr; <code>Tensor</code><a class="headerlink" href="#convert-first-png-tensor" title="Permanent link">&para;</a></h3>
<p>먼저 우리는 지금까지의 분석과 학습을 기반으로 <strong>CasiaWebFace</strong> 데이터셋 중 첫번째 디렉토리의 첫번째 <code>.png</code> 파일을 읽어서 <code>Tensor</code> 로 변환하는 코드를 다음과 같이 쉽게 만들 수 있게 되었다. </p>
<p>다음 코드에서는 <code>.png</code> 를 <code>Tensor</code> 로 변환할 뿐만 아니라 제대로 변환되었는지 확인하기 위하여 <code>CImg</code> 객체와 <code>Tensor</code> 객체의 메타데이터와 실제데이터를 비교해보았다.</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;fstream&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;iterator&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;vector&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;dirent.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;sys/types.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;CImg.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;WICWIU/WICWIU_src/Tensor.hpp&quot;</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">cimg_library</span><span class="p">;</span>

<span class="kt">DIR</span><span class="o">*</span> <span class="nf">getDirList</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span> <span class="n">dirName</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">DIR</span> <span class="o">*</span><span class="n">dir</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">((</span><span class="n">dir</span> <span class="o">=</span> <span class="n">opendir</span><span class="p">(</span><span class="n">dirName</span><span class="p">))</span> <span class="o">==</span> <span class="nb">NULL</span><span class="p">)</span>
        <span class="k">throw</span> <span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="p">(</span><span class="s">&quot;could not open directory&quot;</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">dir</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test_convertFirstCasia2Tensor</span><span class="p">();</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="k">const</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
<span class="p">{</span>
    <span class="n">test_convertFirstCasia2Tensor</span><span class="p">();</span>
    <span class="k">return</span> <span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test_convertFirstCasia2Tensor</span><span class="p">()</span>
<span class="p">{</span>
    <span class="kt">DIR</span> <span class="o">*</span> <span class="n">dir</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">casiaTrainDirPath</span> <span class="o">=</span> <span class="s">&quot;/tmp/casia_train&quot;</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">casiaTrainFirstDirPath</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">casiaTrainFirstImagePath</span><span class="p">;</span>

    <span class="c1">//</span>
    <span class="c1">// Get first directory of casia_train</span>
    <span class="c1">//</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">dir</span> <span class="o">=</span> <span class="n">getDirList</span><span class="p">(</span><span class="n">casiaTrainDirPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">dir</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span>
            <span class="k">throw</span><span class="p">;</span>
        <span class="k">struct</span> <span class="nc">dirent</span> <span class="o">*</span><span class="n">ent</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="n">ent</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">dir</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="n">idx</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// first index (because: 0 -&gt; . 1 -&gt; .. 2 -&gt; first path)</span>
            <span class="p">{</span>
                <span class="n">casiaTrainFirstDirPath</span> <span class="o">=</span> <span class="n">casiaTrainDirPath</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span> <span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">ent</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">closedir</span><span class="p">(</span><span class="n">dir</span><span class="p">);</span>
    <span class="p">}</span> 
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//</span>
    <span class="c1">// Get first image of first directory</span>
    <span class="c1">//</span>
    <span class="k">try</span>
    <span class="p">{</span>
        <span class="n">dir</span> <span class="o">=</span> <span class="n">getDirList</span><span class="p">(</span><span class="n">casiaTrainFirstDirPath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">dir</span> <span class="o">==</span> <span class="k">nullptr</span><span class="p">)</span>
            <span class="k">throw</span><span class="p">;</span>
        <span class="k">struct</span> <span class="nc">dirent</span> <span class="o">*</span><span class="n">ent</span><span class="p">;</span>

        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">idx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="p">(</span><span class="n">ent</span> <span class="o">=</span> <span class="n">readdir</span><span class="p">(</span><span class="n">dir</span><span class="p">))</span> <span class="o">!=</span> <span class="nb">NULL</span><span class="p">;</span> <span class="n">idx</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">idx</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// first index (because: 0 -&gt; . 1 -&gt; .. 2 -&gt; first path)</span>
            <span class="p">{</span>
                <span class="n">casiaTrainFirstImagePath</span> <span class="o">=</span> <span class="n">casiaTrainFirstDirPath</span> <span class="o">+</span> <span class="s">&quot;/&quot;</span> <span class="o">+</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="n">ent</span><span class="o">-&gt;</span><span class="n">d_name</span><span class="p">);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">closedir</span><span class="p">(</span><span class="n">dir</span><span class="p">);</span>
    <span class="p">}</span> 
    <span class="k">catch</span> <span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">invalid_argument</span><span class="o">&amp;</span> <span class="n">e</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">std</span><span class="o">::</span><span class="n">cerr</span> <span class="o">&lt;&lt;</span> <span class="n">e</span><span class="p">.</span><span class="n">what</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//</span>
    <span class="c1">// Data to Tensor</span>
    <span class="c1">//</span>
    <span class="n">CImg</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="n">casiaTrainFirstImagePath</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>

    <span class="n">Tensor</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span> <span class="o">*</span> <span class="n">casiaTrainFirstTensor</span> <span class="o">=</span><span class="err">\</span> 
        <span class="k">new</span> <span class="n">Tensor</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span>
                <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">width</span><span class="p">(),</span>
                <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">height</span><span class="p">(),</span>
                <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">spectrum</span><span class="p">()</span>
                <span class="p">);</span>
    <span class="n">Shape</span> <span class="o">*</span> <span class="n">casiaTrainFirstTensorShape</span> <span class="o">=</span> <span class="n">casiaTrainFirstTensor</span><span class="o">-&gt;</span><span class="n">GetShape</span><span class="p">();</span>

    <span class="n">cimg_forXYC</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="p">{</span> 
        <span class="p">(</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">)]</span> <span class="o">=</span>\
            <span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;##########################################&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;######### Meta data comparison ###########&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;##########################################&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg width: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">width</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg height: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">height</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg depth: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">depth</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg channels: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">spectrum</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg size: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">size</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg pixel type: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">pixel_type</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">casiaTrainFirstImage</span><span class="p">.</span><span class="n">print</span><span class="p">();</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor shape: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstTensorShape</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor rank: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstTensor</span><span class="o">-&gt;</span><span class="n">GetRank</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor dim(0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstTensor</span><span class="o">-&gt;</span><span class="n">GetDim</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor dim(1): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstTensor</span><span class="o">-&gt;</span><span class="n">GetDim</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor dim(2): &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstTensor</span><span class="o">-&gt;</span><span class="n">GetDim</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor Capacity: &quot;</span> <span class="o">&lt;&lt;</span> <span class="n">casiaTrainFirstTensor</span><span class="o">-&gt;</span><span class="n">GetCapacity</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;##########################################&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;######### Real data comparison ###########&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;##########################################&quot;</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg R of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg R of (0, 1): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg R of (27, 159): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">159</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg G of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg G of (31, 51): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">51</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg B of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg B of (1, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;CImg B of (144, 9): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">casiaTrainFirstImage</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>

    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor R of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor R of (0, 1): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor R of (27, 159): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">159</span><span class="p">,</span> <span class="mi">27</span><span class="p">,</span> <span class="mi">0</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor G of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor G of (31, 51): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">51</span><span class="p">,</span> <span class="mi">31</span><span class="p">,</span> <span class="mi">1</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor B of (0, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor B of (1, 0): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&quot;Tensor B of (144, 9): &quot;</span> <span class="o">&lt;&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="o">&gt;</span><span class="p">((</span><span class="o">*</span><span class="n">casiaTrainFirstTensor</span><span class="p">)[</span><span class="n">Index3D</span><span class="p">(</span><span class="n">casiaTrainFirstTensorShape</span><span class="p">,</span> <span class="mi">9</span><span class="p">,</span> <span class="mi">144</span><span class="p">,</span> <span class="mi">2</span><span class="p">)])</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
    <span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
</td></tr></table>
<ul>
<li>
<p><strong>11-17</strong>, <strong>29-80</strong>:</p>
<p>이 코드들은 <a href="../step1-1/">Step 1. Data &rarr; Tensor: Analysis&#58; LFW 1</a> 에서 이미 설명하였다.</p>
</li>
<li>
<p><strong>85</strong>:</p>
<p><strong>CasiaWebFace</strong> 의 첫번째 디렉토리의 첫번째 <code>.png</code> 데이터를 <code>CImg</code> 로 읽는다.</p>
</li>
<li>
<p><strong>87-92</strong>:</p>
<p><code>.png</code> 의 <span class="arithmatex">\(x\)</span>축, <span class="arithmatex">\(y\)</span>축, <span class="arithmatex">\(c\)</span>축 정보를 통하여 <code>Tensor</code> 를 생성한다.</p>
</li>
<li>
<p><strong>95-98</strong>:</p>
<p>데이터를 <code>Tensor</code> 에 복사한다.</p>
</li>
<li>
<p><strong>100-120</strong>:</p>
<p><code>CImg</code> 객체와 <code>Tensor</code> 의 메타데이터를 비교한다.</p>
</li>
<li>
<p><strong>122-145</strong>:</p>
<p><code>CImg</code> 객체와 <code>Tensor</code> 의 실제데이터를 비교한다.</p>
</li>
</ul>
<p>출력 결과는 다음과 같다.</p>
<p><img alt="cmd_URpMlwXPfv" src="https://user-images.githubusercontent.com/16812446/89713770-dea6f800-d9d4-11ea-9c6a-a98689eb340e.png" /></p>
<div class="admonition success">
<p class="admonition-title">Success</p>
<p>이로써 우리는 성공적으로 <strong>CasiaWebFace</strong> 의 첫번째 디렉토리의 첫번째 <code>.png</code> 데이터를 <code>Tensor</code> 로 변환하였다.</p>
</div>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../step1-2/" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  이전
                </span>
                Analysis&#58; LFW 2
              </div>
            </div>
          </a>
        
        
          <a href="../step2/" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  다음
                </span>
                Step 2. 순전파
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018-2020 HGU DL Lab
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/WICWIU" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.6a3d08fc.min.js"></script>
      <script src="../../../assets/javascripts/bundle.71201edf.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "\ud074\ub9bd\ubcf4\ub4dc\ub85c \ubcf5\uc0ac", "clipboard.copied": "\ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub428", "search.config.lang": "en", "search.config.pipeline": " ", "search.config.separator": "[\\s\\-]+", "search.placeholder": "\uac80\uc0c9", "search.result.placeholder": "\uac80\uc0c9\uc5b4\ub97c \uc785\ub825\ud558\uc138\uc694", "search.result.none": "\uac80\uc0c9\uc5b4\uc640 \uc77c\uce58\ud558\ub294 \ubb38\uc11c\uac00 \uc5c6\uc2b5\ub2c8\ub2e4", "search.result.one": "1\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.other": "#\uac1c\uc758 \uc77c\uce58\ud558\ub294 \ubb38\uc11c", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: [],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.4ac00218.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.2/highlight.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.js"></script>
      
        <script src="../../../javascripts/config.js"></script>
      
        <script src="../../../javascripts/all.js"></script>
      
    
  </body>
</html>